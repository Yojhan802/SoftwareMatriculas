<div class="card shadow-sm p-4">
  <h2><i class="fas fa-edit me-2"></i> Nueva Matrícula</h2>
  <hr />

  <div id="matricula-steps">
    <div id="step-1">
      <h4>Paso 1: Identificación del Alumno</h4>
      <div class="row g-2 mb-4 align-items-center">
        <div class="col-8 col-md-9">
          <input
            type="number"
            class="form-control"
            id="alumno-search-input"
            placeholder="Ingrese DNI del Alumno..."
          />
        </div>
        <div class="col-4 col-md-3">
          <button class="btn btn-secondary w-100" id="btn-buscar-alumno">
            <i class="fas fa-search"></i> Buscar
          </button>
        </div>
      </div>

      <div
        id="alumno-seleccionado-info"
        class="alert alert-success mt-3"
        style="display: none"
      >
        <h5 class="alert-heading">
          <i class="fas fa-user-check"></i> Alumno Encontrado
        </h5>
        <hr />
        <p class="mb-0">
          <strong>Nombre:</strong> <span id="nombre-alumno-display"></span
          ><br />
          <strong>DNI:</strong> <span id="dni-alumno-display"></span>
        </p>
      </div>

      <div class="mt-4 d-flex justify-content-end gap-2">
        <button class="btn btn-outline-danger" onclick="cancelarMatricula()">
          Cancelar
        </button>
        <button class="btn btn-primary" id="btn-siguiente-paso1" disabled>
          Siguiente <i class="fas fa-arrow-right ms-1"></i>
        </button>
      </div>
    </div>

    <div id="step-2" style="display: none">
      <h4>Paso 2: Datos de la Matrícula</h4>

      <div class="row g-3 mb-4">
        <div class="col-md-6">
          <label for="anio-escolar" class="form-label"
            >Año Escolar (Periodo)</label
          >
          <select id="anio-escolar" class="form-select">
            <option value="2025" selected>2025</option>
            <option value="2026">2026</option>
          </select>
        </div>
        <div class="col-md-6">
          <label for="grado-select" class="form-label">Grado</label>
          <select id="grado-select" class="form-select">
            <option value="" disabled selected>Seleccione un Grado</option>
            <option value="Primer Grado">Primer Grado</option>
            <option value="Segundo Grado">Segundo Grado</option>
            <option value="Tercer Grado">Tercer Grado</option>
            <option value="Cuarto Grado">Cuarto Grado</option>
            <option value="Quinto Grado">Quinto Grado</option>
          </select>
        </div>

        <div class="col-md-6">
          <label for="fecha-matricula" class="form-label"
            >Fecha de Matrícula</label
          >
          <input
            type="date"
            id="fecha-matricula"
            class="form-control"
            disabled
          />
        </div>

        <input type="hidden" id="hidden-alumno-id" />
      </div>

      <div class="mt-4 d-flex justify-content-end gap-2">
        <button class="btn btn-secondary" id="btn-atras-paso2">
          <i class="fas fa-arrow-left me-1"></i> Anterior
        </button>
        <button class="btn btn-primary" id="btn-siguiente-paso2" disabled>
          Siguiente <i class="fas fa-arrow-right ms-1"></i>
        </button>
      </div>
    </div>

    <div id="step-3" style="display: none">
      <h4>Paso 3: Vista Previa de Cuotas</h4>

      <div class="alert alert-light border">
        <strong>Resumen:</strong> Matrícula para el alumno
        <span id="resumen-nombre-alumno" class="fw-bold"></span> en el grado
        <span id="resumen-grado" class="fw-bold"></span>.
      </div>

      <div class="table-responsive mb-4">
        <table class="table table-bordered table-hover">
          <thead class="table-light">
            <tr>
              <th>Concepto</th>
              <th>Monto</th>
              <th>Vencimiento Estimado</th>
              <th>Estado Inicial</th>
            </tr>
          </thead>
          <tbody id="cuotas-preview-body"></tbody>
        </table>
        <div id="cuota-warning" class="alert alert-info mt-2">
          <i class="fas fa-info-circle"></i> La generación de cuotas es una
          proyección y se confirmará al guardar.
        </div>
      </div>

      <div class="mt-4 d-flex justify-content-end gap-2">
        <button class="btn btn-secondary" id="btn-atras-paso3">
          <i class="fas fa-arrow-left me-1"></i> Anterior
        </button>
        <button class="btn btn-success" id="btn-confirmar-matricula">
          <i class="fas fa-check me-2"></i> Confirmar Matrícula
        </button>
      </div>
    </div>
  </div>
</div>

<script src="../js/matriculas.js"></script>
